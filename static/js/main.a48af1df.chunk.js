(this.webpackJsonpdr20204=this.webpackJsonpdr20204||[]).push([[0],{54:function(e,t,a){},67:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var c=a(3),n=a(2),s=a.n(n),r=a(34),i=a.n(r),l=(a(67),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,85)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))}),o=a(18),j=(a(54),a(14)),d=a(61);var b=function(e){var t=e.opcion;return Object(c.jsx)(d.a.Link,{as:j.b,to:t.path,children:t.label})},m=a(84),u=s.a.createContext({});var h=function(){return Object(c.jsx)(u.Consumer,{children:function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{className:"mb-2 text-dark",children:"WEB-SHOP"}),Object(c.jsxs)(m.a,{expand:"lg",className:"navbar",bg:"dark",variant:"blue",children:[Object(c.jsx)(m.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(c.jsx)(m.a.Collapse,{id:"navbarNavAltMarkup",children:Object(c.jsxs)(d.a,{className:"mt-1",children:[e.login&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h4",{children:Object(c.jsx)(b,{opcion:{label:"Home",path:"/"}})}),Object(c.jsx)("h4",{children:Object(c.jsx)(d.a.Link,{onClick:e.logOutUser,children:"Salir"})})]}),!e.login&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h4",{children:Object(c.jsx)(b,{opcion:{label:"Home",path:"/"}})}),Object(c.jsx)("h4",{children:Object(c.jsx)(b,{opcion:{label:"Registro",path:"/registro"}})}),Object(c.jsx)("h4",{children:Object(c.jsx)(b,{opcion:{label:"Ingresar",path:"/login"}})})]})]})})]})]})}})},O=a(12),p=a(43),x=a(44),g=a(47),v=a(45),f=a(19),y=a(13);var N=function(e){return Object(c.jsx)(u.Consumer,{children:function(t){return Object(c.jsx)("div",{children:Object(c.jsxs)(y.a,{className:"mr-3 mt-3 mb-3 text-center",style:{width:"20rem",height:"25rem"},children:[Object(c.jsxs)(y.a.Body,{children:[Object(c.jsx)(y.a.Title,{children:e.productos.data().name}),Object(c.jsx)(y.a.Img,{src:e.productos.data().img,id:"imgProductos ",style:{width:"15rem"}})]}),Object(c.jsxs)("div",{children:[Object(c.jsxs)(y.a.Text,{className:"text-dark mt-2",id:"priceProducto",children:[" $",e.productos.data().price]}),Object(c.jsx)(j.b,{to:"/productos/"+e.productos.id,children:Object(c.jsx)(f.a,{id:"btnProductos",className:"mr-1 mb-2",variant:"primary",children:"Ver"})}),t.login&&Object(c.jsx)(j.b,{to:"/productos/editar/"+e.productos.id,children:Object(c.jsx)(f.a,{id:"btnProductos",className:"mb-2",variant:"primary",children:"Editar"})})]})]})})}})},S=a(30);S.a.initializeApp({apiKey:"AIzaSyAikUWiRBzu132xGlhgnqhLjmt7WprUf0k",authDomain:"ecommerce-b48f0.firebaseapp.com",databaseURL:"https://ecommerce-b48f0-default-rtdb.firebaseio.com",projectId:"ecommerce-b48f0",storageBucket:"ecommerce-b48f0.appspot.com",messagingSenderId:"97314139701",appId:"1:97314139701:web:028ebb5c43be9d8f320b7c"});var w=S.a.firestore();S.a.auth=S.a.auth(),S.a.db=w;var C=S.a,U=a(79),I=a(80),k=a(81),E=a(60),K=a(82),P=a.p+"static/media/imgAdd.eecd86c6.svg",T=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={productos:[],loading:!0},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.db.collection("productos").get().then((function(t){e.setState({productos:t.docs,loading:!1})}))}},{key:"render",value:function(){var e=this;return this.state.loading?Object(c.jsx)(U.a,{children:Object(c.jsxs)("div",{style:{position:"fixed",top:"50%",left:"50%"},children:[Object(c.jsx)(I.a,{animation:"grow"}),Object(c.jsx)(I.a,{animation:"grow"}),Object(c.jsx)(I.a,{animation:"grow"})]})}):Object(c.jsx)(u.Consumer,{children:function(t){return Object(c.jsxs)(U.a,{children:[Object(c.jsxs)(k.a,{style:{width:"64rem"},children:[Object(c.jsx)(E.a,{id:"col1",children:Object(c.jsx)("h2",{className:"mt-4 ml-1 text-dark",children:"Productos"})}),t.login&&Object(c.jsx)(E.a,{id:"col2",children:Object(c.jsx)(j.b,{to:"/producto/alta",children:Object(c.jsx)("img",{src:P,className:"mt-4",id:"imdAdd",style:{width:"40px"},"data-toggle":"tooltip",title:"Agregar producto"})})})]}),Object(c.jsx)(K.a,{children:e.state.productos.map((function(e,t){return Object(c.jsx)(N,{productos:e},e.id)}))})]})}})}}]),a}(n.Component),A=a(24),B=a(20),D=a(83);var F=function(e){var t=e.variant,a=e.type,n=e.loading,s=e.text;return Object(c.jsxs)(f.a,{variant:t||"primary",type:a||"submit",disabled:n,children:[n&&Object(c.jsx)(I.a,{animation:"border",variant:"light",size:"sm"}),s||"Registrarse"]})};var L=function(e){return Object(c.jsxs)(D.a.Group,{controlId:"formBasic"+e.name,children:[Object(c.jsx)(D.a.Label,{children:e.label}),Object(c.jsx)(D.a.Control,{type:e.type,placeholder:e.placeholder,name:e.name,value:e.value,onChange:e.change})]})};var H=function(){var e=Object(n.useState)({nombre:"",apellido:"",email:"",password:""}),t=Object(o.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)({nombre:"",apellido:"",email:"",password:""}),i=Object(o.a)(r,2),l=i[0],j=i[1],d=Object(n.useState)(!1),b=Object(o.a)(d,2),m=b[0],u=b[1],h=function(e){var t=e.target,c=t.value,n=t.name;s(Object(B.a)(Object(B.a)({},a),{},Object(A.a)({},n,c)))};return Object(c.jsx)(y.a,{style:{width:"30%"},className:"mt-4 ml-2",children:Object(c.jsx)(y.a.Body,{children:Object(c.jsxs)(D.a,{onSubmit:function(e){if(e.preventDefault(),""!=a.nombre){u(!0);var t=a.email,c=a.password;C.auth.createUserWithEmailAndPassword(t,c).then((function(e){console.log("Usuario creado correctamente",e.user.uid),C.db.collection("usuarios").add({nombre:a.nombre,apellido:a.apellido,email:a.email,userId:e.user.uid}).then((function(e){u(!1),console.log(e)})).catch((function(e){console.log(e),u(!1)}))})).catch((function(e){console.log("Error",e),u(!1)}))}else j(Object(B.a)(Object(B.a)({},l),{},{nombre:"El campo nombre es obligatorio"}))},children:[Object(c.jsx)(L,{label:"Nombre",type:"text",placeholder:"Ingrese su nombre",name:"nombre",value:a.nombre,change:h}),Object(c.jsx)(L,{label:"Apellido",type:"text",placeholder:"Ingrese su apellido",name:"apellido",value:a.apellido,change:h}),Object(c.jsx)(L,{label:"Email",type:"email",placeholder:"Ingrese su email",name:"email",value:a.email,change:h}),Object(c.jsx)(L,{label:"Contrase\xf1a",type:"password",placeholder:"Ingrese su contrase\xf1a",name:"password",value:a.password,change:h}),Object(c.jsx)(F,{text:"Registrarse",loading:m})]})})})};var R=function(){var e=Object(n.useContext)(u),t=Object(n.useState)({email:"",password:""}),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),j=l[0],d=l[1],b=Object(O.e)(),m=function(e){var t=e.target,a=t.value,c=t.name;r(Object(B.a)(Object(B.a)({},s),{},Object(A.a)({},c,a)))};return Object(c.jsx)(y.a,{style:{width:"30%"},className:"mt-4 ml-2",children:Object(c.jsx)(y.a.Body,{children:Object(c.jsxs)(D.a,{onSubmit:function(t){t.preventDefault(),d(!0);var a=s.email,c=s.password;C.auth.signInWithEmailAndPassword(a,c).then((function(t){console.log("Usuario logueado",t),d(!1),e.logInUser(),b.push("/")})).catch((function(e){console.log("Error",e),d(!1)}))},children:[Object(c.jsx)(L,{label:"Email",type:"email",placeholder:"Ingrese su email",name:"email",value:s.email,change:m}),Object(c.jsx)(L,{label:"Contrase\xf1a",type:"password",placeholder:"Ingrese su contrase\xf1a",name:"password",value:s.password,change:m}),Object(c.jsx)(F,{text:"Ingresar",loading:j})]})})})},q=a(38);var G=function(e){var t=Object(n.useState)({}),a=Object(o.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),d=l[0],b=l[1];return Object(n.useEffect)((function(){C.db.doc("productos/"+e.match.params.id).get().then((function(e){console.log("doc",e.data()),r(e.data())}))}),[]),d?Object(c.jsx)(u.Consumer,{children:function(e){return Object(c.jsxs)("div",{children:[!e.login&&Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(q.a,{variant:"danger",onClose:function(){return b(!1)},dismissible:!0,className:"ml-2 mt-3",style:{width:"40rem"},children:[Object(c.jsx)(q.a.Heading,{children:"\xa1Ups!"}),Object(c.jsx)("p",{children:"Debe iniciar sesi\xf3n para poder comprar"})]})}),e.login&&Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(q.a,{variant:"success",onClose:function(){return b(!1)},dismissible:!0,className:"ml-2 mt-3",style:{width:"40rem"},children:[Object(c.jsx)(q.a.Heading,{children:"\xa1Gracias!"}),Object(c.jsx)("p",{children:"La compra ha sido exitosa"})]})}),Object(c.jsx)(y.a,{style:{width:"40rem"},className:"ml-2 mt-3",children:Object(c.jsxs)(y.a.Body,{children:[Object(c.jsx)(y.a.Title,{children:s.name}),Object(c.jsx)(y.a.Img,{src:s.img,style:{width:"30rem"},className:"mt-2 mb-2"}),Object(c.jsx)(y.a.Text,{children:s.description}),Object(c.jsxs)(y.a.Text,{children:["SKU: ",s.SKU]}),Object(c.jsxs)(y.a.Text,{children:["$",s.price]}),Object(c.jsx)(f.a,{className:"bg-success",onClick:function(){return b(!0)},children:"Comprar"}),Object(c.jsx)(j.b,{to:"/",children:Object(c.jsx)(f.a,{className:"ml-2 bg-primary",children:"Volver"})})]})})]})}}):Object(c.jsx)(y.a,{style:{width:"40rem"},className:"ml-2 mt-3",children:Object(c.jsxs)(y.a.Body,{children:[Object(c.jsx)(y.a.Title,{children:s.name}),Object(c.jsx)(y.a.Img,{src:s.img,style:{width:"30rem"},className:"mt-2 mb-2"}),Object(c.jsx)(y.a.Text,{children:s.description}),Object(c.jsxs)(y.a.Text,{children:["SKU: ",s.SKU]}),Object(c.jsxs)(y.a.Text,{children:["$",s.price]}),Object(c.jsx)(f.a,{className:"bg-success",onClick:function(){return b(!0)},children:"Comprar"}),Object(c.jsx)(j.b,{to:"/",children:Object(c.jsx)(f.a,{className:"ml-2 bg-primary",children:"Volver"})})]})})};var V=function(){var e=Object(n.useState)({name:"",price:"",description:"",SKU:"",img:""}),t=Object(o.a)(e,2),a=t[0],s=t[1],r=function(e){var t=e.target,c=t.value,n=t.name;s(Object(B.a)(Object(B.a)({},a),{},Object(A.a)({},n,c)))};return Object(c.jsxs)("div",{style:{width:"20%"},className:"ml-3",children:[Object(c.jsx)("h3",{className:"mt-3 text-dark",children:"Nuevo producto"}),Object(c.jsxs)("form",{onSubmit:function(e){console.log(a),C.db.collection("productos").add(a).then((function(e){console.log(e)})),e.preventDefault()},id:"label",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"Nombre"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",value:a.name,onChange:r,required:!0})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"Descripci\xf3n"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"description",value:a.description,onChange:r,required:!0})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"SKU"}),Object(c.jsx)("input",{type:"number",className:"form-control",name:"SKU",value:a.SKU,onChange:r,required:!0})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"Precio"}),Object(c.jsx)("input",{type:"number",className:"form-control",name:"price",value:a.price,onChange:r,required:!0})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"Url Imagen"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"img",value:a.img,onChange:r})]}),Object(c.jsx)(f.a,{className:"mr-1 mt-3 btn btn-success",type:"submit",children:"Guardar"}),Object(c.jsx)(j.b,{to:"/",children:Object(c.jsx)(f.a,{className:"mt-3",variant:"primary",children:"Volver"})})]})]})};var W=function(e){var t=Object(n.useState)({name:"",price:"",SKU:"",description:"",img:""}),a=Object(o.a)(t,2),s=a[0],r=a[1];Object(n.useEffect)((function(){var t=e.match.params.id;C.db.doc("productos/"+t).get().then((function(e){r(e.data()),console.log(e.data())}))}),[]);var i=function(e){var t=e.target,a=t.value,c=t.name;r(Object(B.a)(Object(B.a)({},s),{},Object(A.a)({},c,a)))};return Object(c.jsxs)("div",{style:{width:"20%"},className:"ml-3",children:[Object(c.jsx)("h3",{className:"mt-3 text-dark",children:"Editar producto"}),Object(c.jsxs)("form",{onSubmit:function(t){console.log("datos",s);var a=e.match.params.id;C.db.doc("productos/"+a).set({name:s.name,price:s.price,SKU:s.SKU,description:s.description,img:s.img},{merge:!0}).then((function(e){console.log(e)})),t.preventDefault()},id:"label",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"Nombre"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"name",value:s.name,onChange:i})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"Descripci\xf3n"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"description",value:s.description,onChange:i})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"SKU"}),Object(c.jsx)("input",{type:"number",className:"form-control",name:"SKU",value:s.SKU,onChange:i})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"Precio"}),Object(c.jsx)("input",{type:"number",className:"form-control",name:"price",value:s.price,onChange:i})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{className:"mt-2",children:"Url Imagen"}),Object(c.jsx)("input",{type:"text",className:"form-control",name:"img",value:s.img,onChange:i})]}),Object(c.jsx)(f.a,{className:"mr-1 mt-3 btn btn-success",type:"submit",children:"Guardar"}),Object(c.jsx)(f.a,{className:"mr-1 mt-3 btn-danger",onClick:function(t){var a=e.match.params.id;console.log("Eliminar",a),C.db.doc("productos/"+a).delete().then((function(e){console.log(e)})),t.preventDefault()},children:"Eliminar"}),Object(c.jsx)(j.b,{to:"/",children:Object(c.jsx)(f.a,{className:"mt-3",variant:"primary",children:"Volver"})})]})]})};var z=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(O.a,{path:"/",exact:!0,component:T}),Object(c.jsx)(O.a,{path:"/registro",exact:!0,component:H}),Object(c.jsx)(O.a,{path:"/login",exact:!0,component:R}),Object(c.jsx)(O.a,{path:"/productos/:id",exact:!0,component:G}),Object(c.jsx)(O.a,{path:"/producto/alta",exact:!0,component:V}),Object(c.jsx)(O.a,{path:"/productos/editar/:id",exact:!0,component:W})]})},M=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(p.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={login:localStorage.getItem("login")},e.logInUser=function(t){e.setState({login:!0}),localStorage.setItem("login",!0)},e.logOutUser=function(){e.setState({login:!1}),localStorage.removeItem("login")},e}return Object(x.a)(a,[{key:"render",value:function(){return Object(c.jsx)(u.Provider,{value:{login:this.state.login,logInUser:this.logInUser,logOutUser:this.logOutUser},children:this.props.children})}}]),a}(n.Component);var $=function(){var e=Object(n.useState)([{path:"/",label:"Home"},{path:"/login",label:"Login"},{path:"/registro",label:"Registrarse"}]),t=Object(o.a)(e,1)[0];return Object(c.jsx)(M,{children:Object(c.jsxs)(j.a,{children:[Object(c.jsx)(h,{data:t}),Object(c.jsx)(z,{})]})})};a(76);i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)($,{})}),document.getElementById("root")),l()}},[[77,1,2]]]);
//# sourceMappingURL=main.a48af1df.chunk.js.map