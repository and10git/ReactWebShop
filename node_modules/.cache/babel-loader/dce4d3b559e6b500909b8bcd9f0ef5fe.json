{"ast":null,"code":"import _defineProperty from\"C:/Proyectos/ReactWebShop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Proyectos/ReactWebShop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Proyectos/ReactWebShop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState}from\"react\";import{Card,Form,Button,Spinner,Alert}from'react-bootstrap';import firebase from\"../Config/firebase\";import ButtonWithLoading from\"../Components/Forms/ButtonWithLoading\";import FormGroup from\"../Components/Forms/FormGroup\";import'../Styles/App.css';var styles={formulario:{backgroundColor:\"red\"}};function Registro(){var _useState=useState({nombre:'',apellido:'',email:'',password:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({nombre:'',apellido:'',email:'',password:''}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),spinner=_useState6[0],setSpinner=_useState6[1];var handleSubmit=function handleSubmit(e){e.preventDefault();if(form.nombre==\"\"){setError(_objectSpread(_objectSpread({},error),{},{nombre:\"El campo nombre es obligatorio\"}));return;}setSpinner(true);var email=form.email;var password=form.password;firebase.auth.createUserWithEmailAndPassword(email,password).then(function(data){console.log(\"Usuario creado correctamente\",data.user.uid);firebase.db.collection(\"usuarios\").add({nombre:form.nombre,apellido:form.apellido,email:form.email,userId:data.user.uid//id creado en autenticacion\n}).then(function(data){setSpinner(false);console.log(data);//history.push(\"/login\");\n}).catch(function(err){console.log(err);setSpinner(false);});}).catch(function(error){//setAlert({variant:\"danger\",text:\"Error: \" + error})\nconsole.log(\"Error\",error);setSpinner(false);});};var handleChange=function handleChange(e){var target=e.target;var value=target.value;var name=target.name;setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},name,value)));};return/*#__PURE__*/_jsx(Card,{style:{width:'30%'},className:\"mt-4 ml-2\",children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FormGroup,{label:\"Nombre\",type:\"text\",placeholder:\"Ingrese su nombre\",name:\"nombre\",value:form.nombre,change:handleChange}),/*#__PURE__*/_jsx(FormGroup,{label:\"Apellido\",type:\"text\",placeholder:\"Ingrese su apellido\",name:\"apellido\",value:form.apellido,change:handleChange}),/*#__PURE__*/_jsx(FormGroup,{label:\"Email\",type:\"email\",placeholder:\"Ingrese su email\",name:\"email\",value:form.email,change:handleChange}),/*#__PURE__*/_jsx(FormGroup,{label:\"Contrase\\xF1a\",type:\"password\",placeholder:\"Ingrese su contrase\\xF1a\",name:\"password\",value:form.password,change:handleChange}),/*#__PURE__*/_jsx(ButtonWithLoading,{text:\"Registrarse\",loading:spinner})]})})});}export default Registro;","map":{"version":3,"sources":["C:/Proyectos/ReactWebShop/src/Pages/Registro.jsx"],"names":["React","useState","Card","Form","Button","Spinner","Alert","firebase","ButtonWithLoading","FormGroup","styles","formulario","backgroundColor","Registro","nombre","apellido","email","password","form","setForm","error","setError","spinner","setSpinner","handleSubmit","e","preventDefault","auth","createUserWithEmailAndPassword","then","data","console","log","user","uid","db","collection","add","userId","catch","err","handleChange","target","value","name","width"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Card, Form, Button, Spinner, Alert } from 'react-bootstrap';\nimport firebase from \"../Config/firebase\"\nimport ButtonWithLoading from \"../Components/Forms/ButtonWithLoading\"\nimport FormGroup from \"../Components/Forms/FormGroup\"\nimport '../Styles/App.css';\n\nconst styles = {\n  formulario: {\n    backgroundColor: \"red\"\n  }\n}\nfunction Registro() {\n  const [form, setForm] = useState({ nombre: '', apellido: '', email: '', password: '' });\n  const [error, setError] = useState({ nombre: '', apellido: '', email: '', password: '' });\n  const [spinner, setSpinner] = useState(false);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (form.nombre == \"\") {\n      setError({\n        ...error,\n        nombre: \"El campo nombre es obligatorio\"\n      })\n      return;\n    }\n    setSpinner(true);\n    let email = form.email;\n    let password = form.password;\n\n    firebase.auth.createUserWithEmailAndPassword(email, password)\n      .then((data) => {\n        console.log(\"Usuario creado correctamente\", data.user.uid)\n        firebase.db.collection(\"usuarios\").add(\n          {\n            nombre: form.nombre,\n            apellido: form.apellido,\n            email: form.email,\n            userId: data.user.uid //id creado en autenticacion\n          })\n          .then((data) => {\n            setSpinner(false);\n            console.log(data)\n            //history.push(\"/login\");\n          })\n          .catch((err) => {\n            console.log(err)\n            setSpinner(false);\n          })\n      })\n      .catch((error) => {\n        //setAlert({variant:\"danger\",text:\"Error: \" + error})\n        console.log(\"Error\", error)\n        setSpinner(false);        \n      })\n  }\n\n  const handleChange = (e) => {\n    const target = e.target;\n    const value = target.value\n    const name = target.name;\n    setForm({\n      ...form,\n      [name]: value\n    });\n  }\n\n  return (\n    <Card style={{ width: '30%'}} className=\"mt-4 ml-2\">\n      <Card.Body>\n        <Form onSubmit={handleSubmit}>\n          <FormGroup label=\"Nombre\" type=\"text\" placeholder=\"Ingrese su nombre\" name=\"nombre\" value={form.nombre} change={handleChange} />\n          <FormGroup label=\"Apellido\" type=\"text\" placeholder=\"Ingrese su apellido\" name=\"apellido\" value={form.apellido} change={handleChange} />\n          <FormGroup label=\"Email\" type=\"email\" placeholder=\"Ingrese su email\" name=\"email\" value={form.email} change={handleChange} />\n          <FormGroup label=\"Contraseña\" type=\"password\" placeholder=\"Ingrese su contraseña\" name=\"password\" value={form.password} change={handleChange} />\n          <ButtonWithLoading text=\"Registrarse\" loading={spinner} />\n        </Form>\n\n      </Card.Body>\n    </Card>\n  )\n}\n\nexport default Registro;"]},"metadata":{},"sourceType":"module"}